<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- <meta name="theme-color" content="#03c75a"> -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
  <script src="https://kit.fontawesome.com/b0822c7a94.js" crossorigin="anonymous"></script>
  <link rel="stylesheet" th:href="@{/style.css}">
  <!-- <style>
    .rating-container {
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }
    .star {
        cursor: pointer;
        transition: fill 0.3s;
        fill: #ccc; /* 기본 별 색상 */
    }
    .star.selected {
        fill: #FFD700; /* 선택된 별 색상 */
    }
  </style> -->
</head>
<body>
  <div id="wrap" class="d-flex flex-column min-vh-100" style="padding-top: 48px;">
    <!-- 네비/헤더 -->
    <div th:insert="~{fragments/sideheader::sideheader('리뷰')}" class="px-0 container-sm fixed-top"></div>

    <!-- 컨텐츠 -->
      <div class="container-sm p-4">
        <th:block th:if="${orderItems != null}" th:each="productEntry : ${orderItems}">
            <th:block th:each="orderNumber : ${productEntry.value}">
              <th:block th:each="product : ${orderNumber.value}">
                <th:block th:if="${combination.status == '배송완료'}" th:each="combination : ${product.value}">
                    <div th:if="${combinationStat.last}" class="col-md-3">
                      <th:block th:each="combinationEntry : ${orderNumber.value}">
                        <p th:if="${combinationEntryStat.first}" th:text="${combinationEntry.value[0].formattedOrderDate}"></p>
                      </th:block>
                      <div th:each="brand : ${orderNumber.key}">
                        <p class="fw-bold text-secondary" th:text="${brand}"></p>
                      </div>
                      <p class="badge bg-info text-dark" th:text="${combination.status}"></p>
                      <img class="w-25 rounded" th:src="${combination.image_url}" alt="">
                      <p th:text="${combination.title}"></p>
                      <th:block th:each="combination : ${product.value}">
                        <p class="m-0" th:text="${combination.optionname} + ': ' + ${combination.optionvalue}"></p>
                        <p class="m-0" th:if="${combinationStat.last}" th:text="|수량 : ${combination.quantity}|"></p>
                      </th:block>
                    </div>
                  </th:block>
                </th:block>
            </th:block>
          </th:block>
        </div>
    </div>

    <!-- 하단 푸터 -->
    <div th:insert="~{fragments/footer::footer}" class="container-sm fixed-bottom"></div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous">
  </script>
  <!-- <script>
      // 각 상품별로 별점 컨테이너와 이벤트를 개별 설정
      document.querySelectorAll(".rating-container").forEach((productRating,idx) => {
          const stars = productRating.querySelectorAll(".star");
          const ratingValue = document.querySelectorAll(".ratingValue");

          function handleStarClick(event) {
              const clickedIndex = Array.from(stars).indexOf(event.currentTarget);

              // 선택한 별과 이전 별까지 모두 'selected' 클래스 추가
              stars.forEach((star, index) => {
                  star.classList.toggle("selected", index <= clickedIndex);
              });

              // 평점 값 업데이트
              const rating = clickedIndex + 1;
              ratingValue[idx].innerText = rating;
              console.log("평점:", rating);

              // 모든 별에서 클릭 이벤트 제거
              stars.forEach(star => {
                  star.removeEventListener("click", handleStarClick);
              });
          }

          // 각 별에 클릭 이벤트 리스너 추가
          stars.forEach(star => {
              star.addEventListener("click", handleStarClick);
          });
      });
  </script> -->
</body>

</html>